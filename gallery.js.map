{"version":3,"file":"gallery.js","sources":["../src/js/api.js","../src/js/gallery.js"],"sourcesContent":["export const URL = `https://api.unsplash.com`;\nexport const KEY = `SX46U6zItKkdmN8NpwkJNe87448ScJv-WRWMCKl3kiI`;\n","import { KEY, URL } from './api';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst fetchPhoto = searchQuery => {\n  return fetch(`${URL}/search/photos?page=1&query=${searchQuery}`, {\n    headers: {\n      Authorization: `Client-ID ${KEY}`,\n    },\n  }).then(resp => {\n    if (!resp.ok) {\n      throw new Error(`HTTP error! status: ${resp.status}`);\n    }\n    return resp.json();\n  });\n};\n\nconst gallery = document.querySelector(`.gallery-js`);\nconst form = document.querySelector(`.form-js`);\n\nconst renderMarkup = data => {\n  return data\n    .map(photo => {\n      return `<a href=\"${photo.urls.full}\"><img src=\"${\n        photo.urls.small\n      }\" alt=\"${photo.alt_description || 'Image'}\"></a>`;\n    })\n    .join(``);\n};\nlet lightbox;\nform.addEventListener(`submit`, evt => {\n  evt.preventDefault();\n  const form = evt.currentTarget;\n  const { query } = form.elements;\n  if (query.value.trim() === ``) {\n    iziToast.error({\n      title: `Error`,\n      message: `Write a field`,\n      position: `topRight`,\n    });\n    return;\n  }\n\n  fetchPhoto(query.value.trim()).then(data => {\n    if (data.results.length === 0) {\n      iziToast.error({\n        title: 'No Results',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    gallery.innerHTML = '';\n    gallery.insertAdjacentHTML(`beforeend`, renderMarkup(data.results));\n\n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.gallery-js a');\n    } else {\n      lightbox.refresh(); // оновлюємо\n    }\n  });\n});\n"],"names":["URL","KEY","fetchPhoto","searchQuery","resp","gallery","form","renderMarkup","data","photo","lightbox","evt","query","iziToast","SimpleLightbox"],"mappings":"iyBAAO,MAAMA,EAAM,2BACNC,EAAM,8CCObC,EAAaC,GACV,MAAM,GAAGH,CAAG,+BAA+BG,CAAW,GAAI,CAC/D,QAAS,CACP,cAAe,aAAaF,CAAG,EAChC,CACL,CAAG,EAAE,KAAKG,GAAQ,CACd,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAM,uBAAuBA,EAAK,MAAM,EAAE,EAEtD,OAAOA,EAAK,MAChB,CAAG,EAGGC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAO,SAAS,cAAc,UAAU,EAExCC,EAAeC,GACZA,EACJ,IAAIC,GACI,YAAYA,EAAM,KAAK,IAAI,eAChCA,EAAM,KAAK,KACZ,UAASA,EAAM,iBAAmB,OAAO,QAC3C,EACA,KAAK,EAAE,EAEZ,IAAIC,EACJJ,EAAK,iBAAiB,SAAUK,GAAO,CACrCA,EAAI,eAAc,EAClB,MAAML,EAAOK,EAAI,cACX,CAAE,MAAAC,CAAK,EAAKN,EAAK,SACvB,GAAIM,EAAM,MAAM,KAAM,IAAK,GAAI,CAC7BC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gBACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDX,EAAWU,EAAM,MAAM,KAAI,CAAE,EAAE,KAAKJ,GAAQ,CAC1C,GAAIA,EAAK,QAAQ,SAAW,EAAG,CAC7BK,EAAS,MAAM,CACb,MAAO,aACP,QACE,2EACF,SAAU,UAClB,CAAO,EACD,MACD,CACDR,EAAQ,UAAY,GACpBA,EAAQ,mBAAmB,YAAaE,EAAaC,EAAK,OAAO,CAAC,EAE7DE,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAII,EAAe,eAAe,CAInD,CAAG,CACH,CAAC"}